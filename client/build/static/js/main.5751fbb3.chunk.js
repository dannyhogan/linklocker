(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),s=n.n(a),r=n(9),i=n.n(r),o=(n(70),n(71),n(17)),l=(n(72),n(140)),u=n(11),j=n(141),d=n(12),b=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(d.g)();return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.push({pathname:"/signup",state:{username:n}})},className:"landing-page-form",children:[Object(c.jsxs)("label",{className:"form-label",children:["Create a free account today!",Object(c.jsx)(j.a,{inputProps:{maxLength:20},label:"linklocker.io/",variant:"outlined",onChange:function(e){var t=e.target;s(t.value)},value:n})]}),Object(c.jsx)(l.a,{type:"submit",variant:"outlined",children:"Go"})]})},h=function(){return Object(c.jsxs)("section",{className:"LandingPage",children:[Object(c.jsx)("h1",{children:"One link for everything, stored securely."}),Object(c.jsx)(b,{}),Object(c.jsxs)("div",{className:"auth-container",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"Need an account?"}),Object(c.jsx)(o.b,{to:"/signup",children:Object(c.jsx)(l.a,{variant:"outlined",children:"Sign Up"})})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"Existing user?"}),Object(c.jsx)(o.b,{to:"/login",children:Object(c.jsx)(l.a,{variant:"outlined",children:"Login"})})]})]})]})},O=n(23),f=n(15),p=n(24),x=n.n(p),m=n(33),v="http://localhost:7890/";function g(e){return fetch(v+"api/v1/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then((function(e){return e.json()}))}function k(e){return fetch(v+"api/v1/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then((function(e){return e.json()}))}var C=s.a.createContext(),w=function(e){var t=e.children,n=Object(a.useState)(null),s=Object(u.a)(n,2),r=s[0],i=s[1],o=Object(a.useState)(!0),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)(!0),h=Object(u.a)(b,2),O=h[0],f=h[1];Object(a.useEffect)((function(){(function(){var e=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,n=void 0,fetch(v+"api/v1/user/verify",{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then((function(e){return e.json()}));case 3:(t=e.sent).user&&i(t.user);case 5:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){f(!1)}))}),[]);var p={auth:r,updateAuth:i,authError:j,setAuthError:d,isLoading:O};return Object(c.jsx)(C.Provider,{value:p,children:t})},L=function(){var e=Object(a.useContext)(C);return{auth:e.auth,isLoading:e.isLoading,updateAuth:e.updateAuth,setAuthError:e.setAuthError,authError:e.authError}},y=(n(79),function(){var e=L().auth,t=Object(d.h)().state,n=Object(a.useState)({username:t?t.username:"",password:""}),s=Object(u.a)(n,2),r=s[0],i=s[1];if(e)return Object(c.jsx)(d.a,{to:"/".concat(e.username)});var o=function(){var e=Object(m.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k(r);case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target;i((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},t.name,t.value))}))};return Object(c.jsxs)("div",{className:"SignUp",children:[Object(c.jsx)("h1",{children:"Sign Up"}),Object(c.jsxs)("form",{onSubmit:o,children:[Object(c.jsxs)("label",{children:["Username:",Object(c.jsx)(j.a,{onChange:b,name:"username",value:r.username})]}),Object(c.jsxs)("label",{children:["Password:",Object(c.jsx)(j.a,{onChange:b,name:"password",value:r.password})]}),Object(c.jsxs)("label",{children:["Verify Password:",Object(c.jsx)(j.a,{onChange:b,name:"password",value:r.password})]}),Object(c.jsx)(l.a,{variant:"outlined",type:"submit",children:"Sign Up"})]})]})}),N=(n(80),function(){var e=Object(d.g)(),t=L(),n=t.updateAuth,s=t.auth,r=Object(a.useState)({username:"",password:""}),i=Object(u.a)(r,2),o=i[0],b=i[1];Object(a.useEffect)((function(){s&&e.push("/".concat(s.username))}),[s,e]);var h=function(){var e=Object(m.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g(o);case 3:(c=e.sent).username&&n(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target;b((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},t.name,t.value))}))};return Object(c.jsxs)("div",{className:"Login",children:[Object(c.jsx)("h1",{children:"Login"}),Object(c.jsxs)("form",{onSubmit:h,children:[Object(c.jsxs)("label",{children:["Username:",Object(c.jsx)(j.a,{onChange:p,name:"username",value:o.username})]}),Object(c.jsxs)("label",{children:["Password:",Object(c.jsx)(j.a,{onChange:p,name:"password",value:o.password})]}),Object(c.jsx)(l.a,{type:"submit",children:"Login"})]})]})}),S=(n(81),function(){return Object(c.jsx)("div",{className:"Logo",children:Object(c.jsxs)(o.b,{to:"/",children:[Object(c.jsxs)("svg",{width:"75",height:"150",viewBox:"0 0 125 148",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("path",{className:"lock",d:"M62.4386 0C21.216 3.58397e-06 18 39.6879 18 63.4127H37.1495C37.1495 36.3195 38.0266 19.3314 62.4386 19.3314C86.8505 19.3314 86.8505 39.8343 86.8505 63.4127V99H106V63.4127C106 41.5917 103.661 -3.58397e-06 62.4386 0Z",fill:"#C4C4C4"}),Object(c.jsx)("rect",{className:"pad",y:"63",width:"125",height:"85",rx:"25",fill:"#C4C4C4"}),Object(c.jsx)("path",{d:"M96.2039 115.77H66.4953C63.8741 115.77 56.7087 114.675 56.7087 107.556C56.7087 98.9741 45.0001 99.5238 45 107.556C44.9998 121.721 56.1846 128 66.4953 128H96.2039C106.864 127.452 117 118.508 117 105.548C117 92.5873 108.262 82 98.1264 82H87.9905C84.8448 82 82.0485 84.4095 82.0485 88.2063C82.0485 92.0032 85.3691 94.2302 87.9905 94.2302H96.2039C102.67 94.2302 105.291 99.7064 105.291 105.548C105.291 111.389 99.1749 115.77 96.2039 115.77Z",fill:"#3D3D3D"}),Object(c.jsx)("path",{className:"link",d:"M27.6626 94.2302H58.609C61.3394 94.2302 68.8034 95.3254 68.8034 102.444C68.8034 111.026 80.9999 110.476 81 102.444C81.0002 88.2786 69.3493 82 58.609 82H27.6626C16.5581 82.5476 6 91.4921 6 104.452C6 117.413 15.1018 128 25.66 128H36.2183C39.495 128 42.4078 125.59 42.4078 121.794C42.4078 117.997 38.9489 115.77 36.2183 115.77H27.6626C20.927 115.77 18.1964 110.294 18.1964 104.452C18.1964 98.6111 24.5678 94.2302 27.6626 94.2302Z",fill:"#3D3D3D"})]}),Object(c.jsxs)("h2",{children:["Link",Object(c.jsx)("span",{children:"Locker"})]})]})})}),P=(n(82),function(){var e=L(),t=e.auth,n=e.updateAuth;return t?Object(c.jsxs)("div",{className:"HeaderProfile",children:[Object(c.jsxs)("p",{children:["@",t.username]}),Object(c.jsx)(l.a,{onClick:function(){fetch(v+"api/v1/user/logout",{method:"GET",credentials:"include"}).then(n(null))},children:"Log Out"})]}):null}),T=(n(83),function(){return Object(c.jsxs)("div",{className:"Header",children:[Object(c.jsx)(S,{}),Object(c.jsx)(P,{})]})}),E=(n(84),n.p+"static/media/profile.704c4963.jpg"),A=(n(85),n.p+"static/media/locklogo.02099528.svg"),D=function(e){var t=e.link;e.setActiveLink,e.selfProfile;return Object(c.jsxs)("li",{className:"LinkItem",children:[Object(c.jsx)("div",{className:"link-container",onClick:function(){console.log("clicked",t)},href:t.url,children:Object(c.jsx)("p",{children:t.title})}),Object(c.jsx)("img",{src:A,alt:"lock logo",className:"lock ".concat(t.isLocked?"locked":"unlocked")})]})},H=(n(86),n(55)),U=n.n(H),F=(n(106),function(e){e.type;var t=e.color,n=void 0===t?"#333333":t;return Object(c.jsx)("div",{className:"Loading",children:Object(c.jsx)(U.a,{type:"ThreeDots",color:n,height:100,width:100,timeout:3e3})})}),J=(n(107),function(e){var t=e.toggleOpen,n=(e.setPassword,e.password,e.isOpen);e.link;return Object(c.jsxs)("form",{className:"LinkPasswordForm ".concat(!n&&"closed"),children:[Object(c.jsx)(l.a,{onClick:function(){t((function(e){return!e}))},children:"X"}),Object(c.jsx)("h3",{children:"This link is protected, please enter the password."}),Object(c.jsxs)("label",{children:["Password:",Object(c.jsx)("input",{})]}),Object(c.jsx)(l.a,{type:"submit",children:"Submit"})]})}),G=function(e){e.username;var t=e.links,n=e.loading,s=e.selfProfile,r=Object(a.useState)(null),i=Object(u.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)(!1),d=Object(u.a)(j,2),b=d[0],h=d[1],O=Object(a.useState)(!1),f=Object(u.a)(O,2),p=f[0],x=f[1],m=t.map((function(e,t){return Object(c.jsx)(D,{setActiveLink:l,link:e,selfProfile:s},t)}));return Object(c.jsxs)("div",{className:"LinksDisplay",children:[Object(c.jsx)(J,{password:p,toggleOpen:h,isOpen:b,setPassword:x,link:o}),Object(c.jsx)("ul",{children:n?Object(c.jsx)(F,{}):m})]})},M="http://localhost:7890/";var B=n(57),I=(n(108),n(142)),V=n(56),Z=function(e){var t=e.setLinks,n=e.isOpen,s=e.toggleOpen,r=Object(a.useState)({url:"",title:"",isLocked:!1,password:""}),i=Object(u.a)(r,2),o=i[0],d=i[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),p=h[0],x=h[1],m=function(e){var t=e.target;"isLocked"===t.name?(t.checked||d((function(e){return Object(f.a)(Object(f.a)({},e),{},{password:""})})),d((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},t.name,t.checked))}))):d((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},t.name,t.value.trim()))}))},v=o.password,g=o.url,k=o.isLocked,C=o.title;return Object(c.jsxs)("div",{className:"LinkForm ".concat(n?"open":"closed"),children:[Object(c.jsx)(l.a,{variant:"outlined",className:"close-form-button",onClick:function(){return s(!n)},children:"X"}),Object(c.jsx)("h2",{children:"Add Link:"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){return fetch(M+"api/v1/link/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then((function(e){return e.json()}))}(o).then((function(e){t((function(t){return[].concat(Object(B.a)(t),[e])})),s(!1)}))},children:[Object(c.jsxs)("label",{children:["Link Title:",Object(c.jsx)(j.a,{required:!0,onChange:m,name:"title",variant:"filled",value:C})]}),Object(c.jsxs)("label",{children:["Link URL:",Object(c.jsx)(j.a,{required:!0,onChange:m,variant:"filled",type:"url",name:"url",value:g})]}),Object(c.jsxs)("label",{className:"checkbox",children:["Password Protected:",Object(c.jsx)(I.a,{onChange:m,name:"isLocked",type:"checkbox",color:"primary",value:k})]}),Object(c.jsxs)("label",{className:"password ".concat(!k&&"disabled"),children:["Password:",Object(c.jsx)(j.a,{minLength:5,maxLength:25,variant:"filled",onChange:m,name:"password",type:p?"text":"password",value:v,disabled:!k}),Object(c.jsx)(l.a,{className:"toggle",variant:"outlined",onClick:function(){return x((function(e){return!e}))},children:Object(c.jsx)(V.a,{})})]}),Object(c.jsx)(l.a,{className:"submit-button",type:"submit",variant:"outlined",children:"Create Link"})]})]})},q=function(){var e=Object(d.i)().username,t=L().auth,n=Object(a.useState)([]),s=Object(u.a)(n,2),r=s[0],i=s[1],o=Object(a.useState)(null),j=Object(u.a)(o,2),b=j[0],h=j[1],O=Object(a.useState)(!1),f=Object(u.a)(O,2),p=f[0],x=f[1],m=Object(a.useState)(!1),v=Object(u.a)(m,2),g=v[0],k=v[1],C=Object(a.useState)(!1),w=Object(u.a)(C,2),y=w[0],N=w[1];return Object(a.useEffect)((function(){x(!0),console.log("!!"),e===t.username?k(!0):k(!1),function(e){return fetch(M+"api/v1/link/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(400===t.status)throw new Error("Unable to find profile for @".concat(e,"."));return t.json()}))}(e).then((function(e){console.log(e),i(e)})).then((function(){x(!1)})).catch((function(e){h(e.message)}))}),[e,t]),b?Object(c.jsx)("div",{className:"Profile error",children:Object(c.jsx)("h1",{children:b})}):Object(c.jsxs)("div",{className:"Profile",children:[Object(c.jsx)("img",{className:"profile-photo",src:E,alt:"User avatar"}),Object(c.jsxs)("h1",{children:[Object(c.jsx)("span",{children:"@"}),e]}),Object(c.jsx)(G,{loading:p,username:e,links:r,selfProfile:g}),g&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l.a,{variant:"outlined",className:"add-link-button",onClick:function(){return N(!y)},children:"Add Link"}),Object(c.jsx)(Z,{setLinks:i,isOpen:y,toggleOpen:N})]})]})},X=n(58),R=function(e){var t=e.component,n=Object(X.a)(e,["component"]),a=L(),s=a.auth,r=a.isLoading;return Object(c.jsx)(d.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return r?Object(c.jsx)(F,{}):s?Object(c.jsx)(t,Object(f.a)({},e)):Object(c.jsx)(d.a,{to:"/"})}}))};var z=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(T,{}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:h}),Object(c.jsx)(d.b,{path:"/signup",component:y}),Object(c.jsx)(d.b,{path:"/login",component:N}),Object(c.jsx)(R,{path:"/:username",component:q})]})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(o.a,{children:Object(c.jsx)(w,{children:Object(c.jsx)(z,{})})})}),document.getElementById("root")),K()},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.5751fbb3.chunk.js.map